(function($){$.fn.snsis=function(options){var settings=$.extend({fadingOutSpeed:"fast",fadingInSpeed:"fast",imagesContainerElement:"article",enableKeyboardArrows:true,enableFullScreen:true,},options),This=this,controllersElement=$(this).selector;methods={sliding:function(){$thisDataAction=$(this).data("action");$imagesContainerElementNode=$(settings['imagesContainerElement'])[0];active=$("img.active",$imagesContainerElementNode).index();$("img",$imagesContainerElementNode).eq(active).fadeOut(settings["fadingOutSpeed"],function(){$(this).removeClass("active");if(active==0)active=0;else if($("img",$imagesContainerElementNode).size()-1==active)active=-1;if($thisDataAction=="previous")active--;else if($thisDataAction=="next")active++;$("img",$imagesContainerElementNode).eq(active).addClass("active").fadeIn(settings["fadingInSpeed"])})},click:function(){methods["sliding"].apply(this)}};this.each(function(){$this=$(this);if(typeof $this.data("action")==="undefined"){$.error("There is no 'data-action' attribute for controllers");return false}else if($.inArray($this.data("action"),["previous","next"])==-1){$.error("'data-action' attribute must be 'previous' or 'next'");return false}else if($(settings['imagesContainerElement']).length==0){$.error("There is no "+settings['imagesContainerElement']+" element");return false}$this.click(function(){methods["sliding"].apply(this)})});if(settings['enableKeyboardArrows']===true){$(document).keydown(function(evt){if(evt.keyCode==37)methods["click"].apply($(controllersElement+"[data-action='previous']"));else if(evt.keyCode==39)methods["click"].apply($(controllersElement+"[data-action='next']"))})}if(settings["enableFullScreen"]){$("article > img").click(function(evt){marginleft='-'+($(this).width()/2)+'px';marginTop='-'+($(this).height()/2)+'px';imgSrc=$(this).attr("src");$(".gray-window > div").html('<img src="'+imgSrc+'" style="margin-left:'+marginleft+';margin-top:'+marginTop+'">');$(".gray-window").show()});$(".gray-window > div").click(function(evt){evt.stopPropagation()});$(".gray-window").click(function(){$(".gray-window").hide()})}}})(jQuery);
